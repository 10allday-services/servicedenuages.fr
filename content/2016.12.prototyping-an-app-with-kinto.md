Title: Prototyping an app with Kinto
Date: 2016-12-15
Lang: en
Url: prototyping-an-app-with-kinto
Slug: prototyping-an-app-with-kinto
Summary: Prototyping an app with Kinto and the admin.

I own a car. And it costs a lot. But how much exactly is difficult to know, because the costs are spread between maintenance, repairs, fuel, insurance...
What if I could store each expense right on the spot, tag it, and maybe add a description? That would be tremendously helpful, right?

So let's fire up a django project, maybe use django-rest-framework to have a proper REST API for the future web or mobile application. Then choose a database like postgresql and configure it.

Or, let's instead give it a try using the [kinto-admin].

## What do we need

What we need:

* a data model
* a bucket (`track-my-expenses`) which contains a collection (`car-expenses`)
* a [JSON schema] on the collection to validate the data stored in records
* a simple UI to create/read/update/delete entries (records)

For the data model, I believe the following fields will be sufficient:

* title: a string
* comment: a multiline string
* tag: a string taken from a list of choices
* price: a float

And for the three other points, the [kinto-admin] will do just fine!

## Create the bucket and the collection

For our proof of concept, we'll use Mozilla's demo server, which is wiped clean every night: https://kinto.dev.mozaws.net/v1/.

Let's sign in to the [admin] with the user/pass of our choice (the user will be "created" on the spot):

![kinto-admin-sign-in]({filename}/images/kinto-admin-sign-in.png)

Once connected, we can [create a bucket]:

![kinto-admin-connected]({filename}/images/kinto-admin-connected.png)
![kinto-admin-create-bucket]({filename}/images/kinto-admin-create-bucket.png)

And then [create a collection]:

![kinto-admin-create-collection]({filename}/images/kinto-admin-create-collection.png)

Let's not submit this new collection just yet:


## Add a JSON schema

As you can see while creating a collection, there's the possibility to add a JSON schema. This schema will be used to validate the data we'll submit, before it's stored in a record.
Following our data model, here's what the JSON schema should look like:

```json
{
  "type": "object",
  "properties": {
    "title": {
      "type": "string",
      "title": "Title",
      "description": "Short title for an expense"
    },
    "comment": {
      "type": "string",
      "title": "Comment",
      "description": "Provide details if needed..."
    },
    "tag": {
      "type": "string",
      "enum": ["fuel", "repair", "insurance", "maintenance", "equipment"],
      "title": "Tag",
      "description": "A tag for this expense"
    },
    "price": {
      "type": "number",
      "title": "Price",
      "description": "The cost for this expense"
    }
  }
}
```

Let's still not submit this new collection just yet:

## Add a UI schema for fun

We can also add a nice [UI schema] to improve the way the admin will display our data, and the form to add/edit it.

```json
{
  "ui:order": [
    "title",
    "comment",
    "tag",
    "price"
  ],
  "comment": {
    "ui:widget": "textarea"
  }
}
```

Nearly done! Just before submitting this new collection, let's do one last thing:

## Final touches

By default, the admin will only display one column in the "list records" page. It would be much more convenient to see the `title` but also the `tag` and `price`:

![kinto-admin-records-list-columns]({filename}/images/kinto-admin-records-list-columns.png)

## Profit!

We now have everything we need for our proof of concept!

List the current records (there's none yet):
![kinto-admin-list-records]({filename}/images/kinto-admin-list-records.png)

Add a new record:
![kinto-admin-add-record]({filename}/images/kinto-admin-add-record.png)

Display the list of (sortable) records once we added a few:
![kinto-admin-list-records-many]({filename}/images/kinto-admin-list-records-many.png)

As you can see, without a single line of code and very small effort, we have a functional, albeit very basic, proof of concept!



[kinto-admin]: https://github.com/Kinto/kinto-admin/
[JSON schema]: https://kinto.readthedocs.io/en/latest/api/1.x/collections.html#collection-json-schema
[admin]: https://kinto.dev.mozaws.net/v1/admin/
[create a bucket]: https://kinto.dev.mozaws.net/v1/admin/#/buckets/create
[create a collection]: https://kinto.dev.mozaws.net/v1/admin/#/buckets/track-my-expenses/collections/create
[UI schema]: https://github.com/mozilla-services/react-jsonschema-form/blob/master/README.md#the-uischema-object
